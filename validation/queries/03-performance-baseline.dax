// ============================================================================
// QUERY DE VALIDAÇÃO - PERFORMANCE BASELINE
// ============================================================================
// Objetivo: Estabelecer baseline de performance para medidas complexas
// Data: 2026-02-03
// Fase: 3 - Validação de Medidas
// ============================================================================

// INSTRUÇÕES:
// 1. Execute cada query com Performance Analyzer ativado
// 2. Registre tempo de execução (Query Duration)
// 3. Compare entre V2, V3 e Golden Dataset
// 4. Meta: Golden Dataset deve ser <= V2 em performance
// 5. Queries > 10 segundos requerem otimização

// ============================================================================
// TESTE 1: Medida DIO (Dias de Inventário) - Alta Complexidade
// ============================================================================

EVALUATE
TOPN(
    100,
    SUMMARIZECOLUMNS(
        'Dim Produto AXIA'[DSC_PRODUTO],
        'Dim Filiais AXIA'[DSC_FILIAL],
        "DIO_Dias", [DIO (Dias)],
        "VLR_Estoque", [VLR Estoque Disponível],
        "VLR_Vendas_365d", [VLR Vendas 365d]
    ),
    [DIO (Dias)],
    DESC
)

// Métrica esperada: < 5 segundos
// Registrar: Query Duration, SE CPU Time, SE Query Duration

// ============================================================================
// TESTE 2: Medida de Rupturas - Complexidade Média
// ============================================================================

// EVALUATE
// TOPN(
//     100,
//     SUMMARIZECOLUMNS(
//         'Dim Produto AXIA'[DSC_PRODUTO],
//         'Dim Filiais AXIA'[DSC_FILIAL],
//         "Dias_Ruptura", [Dias em Ruptura],
//         "Perc_Ruptura", [% Ruptura],
//         "VLR_Vendas_Perdidas", [VLR Vendas Perdidas]
//     ),
//     [Dias em Ruptura],
//     DESC
// )

// Métrica esperada: < 3 segundos

// ============================================================================
// TESTE 3: Agregação Temporal - Vendas 365 dias
// ============================================================================

// EVALUATE
// SUMMARIZECOLUMNS(
//     'Dim Produto AXIA'[DSC_PRODUTO],
//     "VLR_Vendas_365d", [VLR Vendas 365d],
//     "QTD_Vendas_365d", [QTD Vendas 365d],
//     "VLR_Vendas_MTD", [VLR Vendas MTD],
//     "VLR_Vendas_YTD", [VLR Vendas YTD]
// )

// Métrica esperada: < 2 segundos

// ============================================================================
// TESTE 4: Medidas de Estoque Retroativo (Exclusivas V3)
// ============================================================================

// EVALUATE
// SUMMARIZECOLUMNS(
//     'Dim Calendário'[Data],
//     'Dim Produto AXIA'[DSC_PRODUTO],
//     "Estoque_Retroativo_R$", [Estoque Retroativo (R$)],
//     "Estoque_Retroativo_un", [Estoque Retroativo (un)],
//     "Custo_Medio_Retroativo", [Custo médio Retroativo]
// )

// Métrica esperada: < 4 segundos
// Nota: Validar apenas se medidas foram migradas para Golden Dataset

// ============================================================================
// TESTE 5: Stress Test - Granularidade Máxima
// ============================================================================

// EVALUATE
// SUMMARIZECOLUMNS(
//     'Dim Calendário'[Data],
//     'Dim Produto AXIA'[DSC_PRODUTO],
//     'Dim Filiais AXIA'[DSC_FILIAL],
//     "VLR_Vendas", [VLR Vendas Total],
//     "QTD_Vendas", [QTD Vendas Total],
//     "VLR_Estoque", [VLR Estoque Total],
//     "DIO", [DIO (Dias)]
// )

// Métrica esperada: < 15 segundos
// Nota: Este é o pior cenário (máxima granularidade)

// ============================================================================
// TESTE 6: Medidas Switch (Unidades) - Exclusivas V3
// ============================================================================

// EVALUATE
// SUMMARIZECOLUMNS(
//     'Dim Produto AXIA'[DSC_PRODUTO],
//     "Vendas_un", [Vendas (un)],
//     "Vendas_KgL", [Vendas (Kg/L)],
//     "Vendas_Hec", [Vendas (Hec)],
//     "Vendas_R$", [Vendas (R$)]
// )

// Métrica esperada: < 2 segundos

// ============================================================================
// TEMPLATE DE REGISTRO DE RESULTADOS
// ============================================================================
// Salvar em: validation/results/performance-baseline.md
//
// ## Modelo: [V2 | V3 | Golden]
// ## Data: YYYY-MM-DD HH:MM
// ## Teste: [Nome do Teste]
// 
// | Métrica                | Valor      |
// |------------------------|------------|
// | Query Duration         | X.XX s     |
// | SE CPU Time            | X.XX s     |
// | SE Query Duration      | X.XX s     |
// | Total Rows Returned    | X,XXX      |
// | Status                 | ✅ / ⚠️ / ❌ |
//
// **Observações:**
// - [Notas sobre performance]
// - [Gargalos identificados]
// - [Recomendações de otimização]
